<t-navbar title="我的测试" left-arrow />
<view class="test-container">
  <block wx:if="{{testResult}}">
    <!-- 有测试结果时显示 -->
    <view class="result-card">
      <view class="card-title">{{testResult.title}}</view>
      <view class="result-description">{{testResult.description}}</view>
      
      <!-- 性格分析板块 -->
      <view class="analysis-section">
        <view class="section-title">性格分析</view>
        
        <!-- 雷达图结果 -->
        <view class="chart-container">
          <!-- 雷达图 -->
          <view class="radar-chart">
            <image wx:if="{{radarImage}}" src="{{radarImage}}" mode="widthFix" style="width: 220px; height: auto;"></image>
          </view>

          <!-- 维度评分条形图 -->
          <view class="dimensions-chart">
            <view class="dimension-item" wx:for="{{testResult.abilities}}" wx:key="name">
              <view class="dimension-info">
                <text class="dimension-name">{{item.name}}</text>
                <text class="dimension-score">{{item.value}}</text>
              </view>
              <view class="dimension-bar-bg">
                <view class="dimension-bar" style="width: {{item.value * 5}}%;"></view>
              </view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 推荐鱼种 -->
      <view class="recommended-section">
        <view class="section-title">推荐鱼种</view>
        <view class="fish-list">
          <view class="fish-item" wx:for="{{testResult.fishes}}" wx:key="id" bindtap="viewFishDetail" data-id="{{item.id}}">
            <text>{{item.name}}</text>
          </view>
        </view>
      </view>
      
      <!-- 操作按钮 -->
      <view class="action-area">
        <button class="share-btn" open-type="share">
          <view class="share-icon"></view>
          分享结果
        </button>
        <button class="restart-btn" bindtap="restartTest">重新测试</button>
      </view>
    </view>
  </block>
  
  <!-- 有未完成的测试时显示 -->
  <block wx:elif="{{hasUnfinishedTest}}">
    <view class="unfinished-test">
      <view class="unfinished-title">你有一个未完成的测试</view>
      <view class="unfinished-description">继续完成测试，发现适合你的鱼种</view>
      <t-button theme="primary" size="medium" icon="play-circle" shape="round" bindtap="continueTest">继续测试</t-button>
    </view>
  </block>
  
  <!-- 没有测试结果时显示 -->
  <block wx:else>
    <view class="empty-state">
      <view class="empty-title">暂无测试结果</view>
      <view class="empty-description">完成养鱼性格测试，了解你适合养什么鱼</view>
      <t-button class="start-test-btn" theme="primary" size="medium" icon="add-circle" shape="round" bindtap="startTest">开始测试</t-button>
    </view>
  </block>
</view> 